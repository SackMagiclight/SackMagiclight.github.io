<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>MinIRはどのように作られたか | GAF Talk</title>
    <meta name="description" content="ゲームとかガジェットとか好きなこと">
    <script src="https://platform.twitter.com/widgets.js" charset="utf-8" async="true"></script>
  <link rel="icon" type="image/png" href="/favicon.png">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@sack_magiclight">
  <meta name="twitter:creator" content="@sack_magiclight">
  <meta property="og:type" content="website">
  <meta property="og:title" content="GAF Talk">
  <meta property="og:site_name" content="GAF Talk">
  <meta property="og:url" content="https://www.gaftalk.com/">
  <meta property="google-site-verification" content="-Yw6Wc9QR_o4SxfHuO43UzZK7m0BG8JrwRifhpCCZqk">
  <meta property="og:image" content="https://www.gaftalk.com/logo.png">
    <meta property="og:title" content="MinIRはどのように作られたか"><meta property="og:image" content="https://www.gaftalk.com/img/development_of_minir/aws.png">
    <link rel="preload" href="/assets/css/0.styles.74dfbccc.css" as="style"><link rel="preload" href="/assets/js/app.b856ed55.js" as="script"><link rel="preload" href="/assets/js/32.396c40ca.js" as="script"><link rel="preload" href="/assets/js/1.0b104487.js" as="script"><link rel="preload" href="/assets/js/8.75c86fb6.js" as="script"><link rel="preload" href="/assets/js/14.8f21af76.js" as="script"><link rel="prefetch" href="/assets/js/10.2c6879c9.js"><link rel="prefetch" href="/assets/js/11.641a9081.js"><link rel="prefetch" href="/assets/js/12.64067055.js"><link rel="prefetch" href="/assets/js/13.b9b55dc6.js"><link rel="prefetch" href="/assets/js/15.caee947b.js"><link rel="prefetch" href="/assets/js/16.a7a29ded.js"><link rel="prefetch" href="/assets/js/17.8c55c4f3.js"><link rel="prefetch" href="/assets/js/18.ece11513.js"><link rel="prefetch" href="/assets/js/19.797ab489.js"><link rel="prefetch" href="/assets/js/20.1cd12a2a.js"><link rel="prefetch" href="/assets/js/21.ce8c8087.js"><link rel="prefetch" href="/assets/js/22.3cb21674.js"><link rel="prefetch" href="/assets/js/23.c308d948.js"><link rel="prefetch" href="/assets/js/24.5aa40d6f.js"><link rel="prefetch" href="/assets/js/25.95ae0572.js"><link rel="prefetch" href="/assets/js/26.7177cd9a.js"><link rel="prefetch" href="/assets/js/27.4da8faa5.js"><link rel="prefetch" href="/assets/js/28.8a81ce05.js"><link rel="prefetch" href="/assets/js/29.546b3817.js"><link rel="prefetch" href="/assets/js/3.419eadca.js"><link rel="prefetch" href="/assets/js/30.3363a684.js"><link rel="prefetch" href="/assets/js/31.dc1cf891.js"><link rel="prefetch" href="/assets/js/33.07690678.js"><link rel="prefetch" href="/assets/js/34.34fedf92.js"><link rel="prefetch" href="/assets/js/35.d978e2dd.js"><link rel="prefetch" href="/assets/js/36.d0c8d732.js"><link rel="prefetch" href="/assets/js/37.43b7bbf3.js"><link rel="prefetch" href="/assets/js/38.26c5e387.js"><link rel="prefetch" href="/assets/js/39.e8ab57ca.js"><link rel="prefetch" href="/assets/js/4.20be0839.js"><link rel="prefetch" href="/assets/js/40.49bdec15.js"><link rel="prefetch" href="/assets/js/41.294ca8d1.js"><link rel="prefetch" href="/assets/js/42.f472f096.js"><link rel="prefetch" href="/assets/js/43.49e7470d.js"><link rel="prefetch" href="/assets/js/5.ffc16b94.js"><link rel="prefetch" href="/assets/js/6.b36cf88b.js"><link rel="prefetch" href="/assets/js/7.c464f40b.js"><link rel="prefetch" href="/assets/js/9.7f5a2857.js">
    <link rel="stylesheet" href="/assets/css/0.styles.74dfbccc.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">GAF Talk</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/about/" class="nav-link">about</a></div><div class="nav-item"><a href="https://twitter.com/sack_magiclight" target="_blank" rel="noopener noreferrer" class="nav-link external">
  twitter
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/SackMagiclight" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/2018/06/16/development-of-minir/" class="nav-link router-link-exact-active router-link-active">ja</a></li><li class="dropdown-item"><!----> <a href="/en/" class="nav-link">en</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/about/" class="nav-link">about</a></div><div class="nav-item"><a href="https://twitter.com/sack_magiclight" target="_blank" rel="noopener noreferrer" class="nav-link external">
  twitter
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/SackMagiclight" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/2018/06/16/development-of-minir/" class="nav-link router-link-exact-active router-link-active">ja</a></li><li class="dropdown-item"><!----> <a href="/en/" class="nav-link">en</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/2018/06/16/development-of-minir/" class="active sidebar-link">MinIRはどのように作られたか</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/2018/06/16/development-of-minir/#はじめに" class="sidebar-link">はじめに</a></li><li class="sidebar-sub-header"><a href="/2018/06/16/development-of-minir/#やることはそんなに多くない" class="sidebar-link">やることはそんなに多くない</a></li><li class="sidebar-sub-header"><a href="/2018/06/16/development-of-minir/#必要なものを具体的に" class="sidebar-link">必要なものを具体的に</a></li><li class="sidebar-sub-header"><a href="/2018/06/16/development-of-minir/#サーバーレスという選択-amazon-web-service" class="sidebar-link">サーバーレスという選択 - Amazon Web Service</a></li><li class="sidebar-sub-header"><a href="/2018/06/16/development-of-minir/#minirで利用するawsサービス" class="sidebar-link">MinIRで利用するAWSサービス</a></li><li class="sidebar-sub-header"><a href="/2018/06/16/development-of-minir/#サービスを組み合わせる" class="sidebar-link">サービスを組み合わせる</a></li><li class="sidebar-sub-header"><a href="/2018/06/16/development-of-minir/#webページも無料で作る-github-pages" class="sidebar-link">Webページも無料で作る -Github Pages-</a></li><li class="sidebar-sub-header"><a href="/2018/06/16/development-of-minir/#まとめ（システム全体像）" class="sidebar-link">まとめ（システム全体像）</a></li><li class="sidebar-sub-header"><a href="/2018/06/16/development-of-minir/#おわりに" class="sidebar-link">おわりに</a></li></ul></li></ul> <div class="divider"></div> <ul><li class="sidebar-heading">Category</li> <li class="categories"><a href="/category/Benchmark.html">Benchmark(2)</a></li><li class="categories"><a href="/category/GPU.html">GPU(9)</a></li><li class="categories"><a href="/category/bms.html">bms(5)</a></li><li class="categories"><a href="/category/beatoraja.html">beatoraja(6)</a></li><li class="categories"><a href="/category/java.html">java(1)</a></li><li class="categories"><a href="/category/development.html">development(1)</a></li><li class="categories"><a href="/category/BMS.html">BMS(2)</a></li><li class="categories"><a href="/category/Skin.html">Skin(1)</a></li><li class="categories"><a href="/category/CPU.html">CPU(5)</a></li><li class="categories"><a href="/category/Radeon.html">Radeon(3)</a></li><li class="categories"><a href="/category/AMD.html">AMD(7)</a></li><li class="categories"><a href="/category/Intel.html">Intel(1)</a></li><li class="categories"><a href="/category/MinIR.html">MinIR(1)</a></li><li class="categories"><a href="/category/NVIDIA.html">NVIDIA(9)</a></li><li class="categories"><a href="/category/GTX1070Ti.html">GTX1070Ti(2)</a></li><li class="categories"><a href="/category/リーク.html">リーク(2)</a></li><li class="categories"><a href="/category/雑記.html">雑記(3)</a></li><li class="categories"><a href="/category/GTX1660Ti.html">GTX1660Ti(2)</a></li><li class="categories"><a href="/category/GTX1660.html">GTX1660(1)</a></li><li class="categories"><a href="/category/RTX2060.html">RTX2060(2)</a></li><li class="categories"><a href="/category/DeskMini.html">DeskMini(1)</a></li><li class="categories"><a href="/category/ASRock.html">ASRock(1)</a></li><li class="categories"><a href="/category/Ryzen.html">Ryzen(5)</a></li><li class="categories"><a href="/category/3DMark.html">3DMark(1)</a></li><li class="categories"><a href="/category/RTX2080.html">RTX2080(4)</a></li><li class="categories"><a href="/category/Athlon.html">Athlon(1)</a></li><li class="categories"><a href="/category/Asrock.html">Asrock(1)</a></li><li class="categories"><a href="/category/レビュー.html">レビュー(4)</a></li><li class="categories"><a href="/category/Ray.html">Ray(1)</a></li><li class="categories"><a href="/category/PAWN.html">PAWN(1)</a></li><li class="categories"><a href="/category/Geforce.html">Geforce(1)</a></li><li class="categories"><a href="/category/RTX2080Ti.html">RTX2080Ti(2)</a></li><li class="categories"><a href="/category/RTX2070.html">RTX2070(1)</a></li><li class="categories"><a href="/category/CUDA.html">CUDA(1)</a></li><li class="categories"><a href="/category/RyzenMobile.html">RyzenMobile(1)</a></li><li class="categories"><a href="/category/GTX1070.html">GTX1070(1)</a></li><li class="categories"><a href="/category/GTX1070ti.html">GTX1070ti(1)</a></li></ul> </div> <div class="page"> <div class="content default"><h2 id="はじめに"><a href="#はじめに" aria-hidden="true" class="header-anchor">#</a> はじめに</h2> <p>beatorajaの認知度が高まっていくに連れて、<strong>IRがない</strong> という声を多く目にするようになりました。<br>
正確に言えばIRがないというのは誤りで、<code>Chroma IR</code>が存在していましたが、広く公開されているIRではありませんでした。</p> <p>というわけで、「ないなら作ればいい」のノリで作成したのが現在稼働中の<code>MinIR</code>です。<br>
本記事では、このMinIRがどのようにして作られたかを解説します。</p> <hr> <h2 id="やることはそんなに多くない"><a href="#やることはそんなに多くない" aria-hidden="true" class="header-anchor">#</a> やることはそんなに多くない</h2> <p>さて、そもそもIRはどのような仕組みなのでしょうか。</p> <p>やることは「データを送り、保存する」「データを取得し、表示する」の2つです。<br> <img src="/assets/img/server1.0c50eb88.png" alt=""></p> <p>必要なのは</p> <ul><li>IRのデータの受け口</li> <li>IRのデータを保存するための場所</li> <li>IRデータの送信機構</li> <li>IRデータの表示機構</li></ul> <p>の4つです。<br>
そんなに多くありません。</p> <hr> <h2 id="必要なものを具体的に"><a href="#必要なものを具体的に" aria-hidden="true" class="header-anchor">#</a> 必要なものを具体的に</h2> <p>必要な「機能」を抽出したところで、具体的に何が必要かを考えていきます。</p> <h3 id="irのデータの受け口"><a href="#irのデータの受け口" aria-hidden="true" class="header-anchor">#</a> IRのデータの受け口</h3> <p>データを受け取る「サーバー」が必要です。</p> <h3 id="irのデータを保存するための場所"><a href="#irのデータを保存するための場所" aria-hidden="true" class="header-anchor">#</a> IRのデータを保存するための場所</h3> <p>保存箇所である「データベース」が必要です。</p> <h3 id="irデータの送信機構"><a href="#irデータの送信機構" aria-hidden="true" class="header-anchor">#</a> IRデータの送信機構</h3> <p>同じく、データ取得命令を処理する「サーバー」が必要です。</p> <h3 id="irデータの表示機構"><a href="#irデータの表示機構" aria-hidden="true" class="header-anchor">#</a> IRデータの表示機構</h3> <p>表示用に「Webページ」が必要です。</p> <p>こうしてみると、レンタルサーバを借りて、内部にデータベースとWebページ機構を組み込めば良さそうですが…</p> <hr> <h2 id="サーバーレスという選択-amazon-web-service"><a href="#サーバーレスという選択-amazon-web-service" aria-hidden="true" class="header-anchor">#</a> サーバーレスという選択 - Amazon Web Service</h2> <p>レンタルサーバを借りてどうこうするのは、意外と管理・維持が面倒です。<br>
死活監視やリソース監視、パッチの適用など、サーバーを正常に動作させ続けるためにさまざまな作業が必要です。</p> <p>そのため、MinIRでは、「サーバーレスアーキテクチャ」を採用しています。</p> <h3 id="サーバーレスアーキテクチャ"><a href="#サーバーレスアーキテクチャ" aria-hidden="true" class="header-anchor">#</a> サーバーレスアーキテクチャ</h3> <p><strong>サーバを自前で用意せず</strong>、サーバーを持つ事業者が提供するサービスを活用してシステムを構築します。</p> <p>MinIRでは「サーバーを持つ事業者」は<code>Amazon</code>、「サーバーを持つ事業者が提供するサービス」は<a href="https://aws.amazon.com/jp/" target="_blank" rel="noopener noreferrer">Amazon Web Service<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>です。</p> <h3 id="amazon-web-service-aws"><a href="#amazon-web-service-aws" aria-hidden="true" class="header-anchor">#</a> Amazon Web Service (AWS)</h3> <p><img src="data:image/png;base64,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" alt=""></p> <blockquote><p>アマゾン ウェブ サービスでは、コンピューティング、ストレージ、データベース、分析、ネットワーキング、モバイル、開発者用ツール、管理ツール、IoT、セキュリティ、エンタープライズアプリケーションなど、グローバルなクラウドベース製品を幅広く利用できます。これらのサービスを使用すると、企業や組織はより迅速かつ低い IT コストでスケールすることができます。AWS は最大規模の企業と注目を集めている新興企業から信頼されており、ウェブアプリケーション、モバイルアプリケーション、ゲーム開発、データ処理、データウェアハウス、ストレージ、アーカイブなど多様なワークロードを支援しています。</p> <p>製品ページより引用 <a href="https://aws.amazon.com/jp/products/" target="_blank" rel="noopener noreferrer">(https://aws.amazon.com/jp/products/)<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote> <p>簡単言えば <strong>いろんなサービスがあるから、それらをうまく組み合わせて活用してね！</strong> でしょうか。<br>
実際、その通りなので、MinIRで利用しているサービスを解説します。</p> <hr> <h2 id="minirで利用するawsサービス"><a href="#minirで利用するawsサービス" aria-hidden="true" class="header-anchor">#</a> MinIRで利用するAWSサービス</h2> <p>MinIRで利用するサービスは主に下記の3つです。</p> <ul><li>AWS Lambda (lambda)</li> <li>Amazon DynamoDB (DynamoDB)</li> <li>Amazon Cognito (Cognito)</li></ul> <h3 id="aws-lambda"><a href="#aws-lambda" aria-hidden="true" class="header-anchor">#</a> AWS Lambda</h3> <p><img src="/assets/img/lambda.aef6916a.png" alt=""></p> <p>(「ラムダ」って読みます)<br>
イベントに対してコードを実行するサービスです。<br>
「データを受け取る」「データ要求に対して送信する」の2つの役割に対してこのサービスを使います。</p> <p>具体的には</p> <ul><li>データを受け取る
<ul><li>受け取ったスコア・譜面データを<code>DynamoDB</code>に保存する</li></ul></li> <li>データ要求に対して送信する
<ul><li>要求に沿う形でスコア・譜面データを<code>DynamoDB</code>から取得し、返却する</li></ul></li></ul> <p>を行います。</p> <p>コードは<code>Node.js</code>、<code>Java</code>、<code>C#</code>、<code>Go</code>、<code>Python</code>が選択できますが、MinIRでは<code>Node.js</code>を採用しています。
（<code>Node.js</code>の説明は<a href="https://eng-entrance.com/what-is-nodejs" target="_blank" rel="noopener noreferrer">この辺<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>とかかな？）</p> <p>ひと月あたり</p> <ul><li>1,000,000回（100万回）の呼び出し</li> <li>メモリを400,000GB（40万GB）秒利用する
<ul><li>例1：256MBの処理を4秒で1GB秒</li> <li>例2：1GBの処理を0.5秒で0.5GB秒</li></ul></li></ul> <p>を満たすまでは<strong>無料</strong>です。</p> <p>(<a href="https://aws.amazon.com/jp/lambda/pricing/" target="_blank" rel="noopener noreferrer">AWS Lambda 料金<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>)</p> <h3 id="amazon-dynamodb"><a href="#amazon-dynamodb" aria-hidden="true" class="header-anchor">#</a> Amazon DynamoDB</h3> <p><img src="/assets/img/dynamodb.3d17f175.png" alt=""></p> <p>(「ダイナモDB」って読みます)<br>
データベースサービスですが、一般的な<a href="https://aws.amazon.com/jp/relational-database/" target="_blank" rel="noopener noreferrer">リレーショナルデータベース (RDB)<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>ではありません。<br> <a href="https://aws.amazon.com/jp/nosql/" target="_blank" rel="noopener noreferrer">NoSQL データベース (NoSQL)<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>と呼ばれる非リレーショナルデータベースです。</p> <p>NoSQL データベースとは<strong>一意キー</strong>と<strong>値</strong>の単純な組み合わせを格納したデータベースです。<br>
以下は簡単な例です。</p> <table><thead><tr><th>一意キー</th> <th>値</th></tr></thead> <tbody><tr><td>ユーザーID + 譜面ID</td> <td>スコア、記録日時 …</td></tr> <tr><td>譜面ID</td> <td>タイトル、BPM、総ノーツ数 …</td></tr> <tr><td>ユーザーID</td> <td>bio、ライバル情報 …</td></tr></tbody></table> <p>※MinIRが上記の例の通りに作られているわけではありません</p> <p>キーと値のペアのため、RDBとは違ったメリット、デメリットが存在します。</p> <table><thead><tr><th></th> <th>RDB</th> <th>NoSQL</th></tr></thead> <tbody><tr><td>データ参照</td> <td>複数の表と関係性を持ち、SQLを用いて、高度な条件でのデータを取得できる</td> <td>他のデータとの関係性がないため、複雑な参照には不向き</td></tr> <tr><td>トランザクション</td> <td>データの不整合は起こらない</td> <td>結果整合性を持つ（即座にデータの変更が反映されるとは限らない）</td></tr> <tr><td>処理速度</td> <td>強固なトランザクション処理を行うため、それほど速くはない</td> <td>大量のデータを扱うサービスで参照や追加処理が主な処理である場合、高速</td></tr></tbody></table> <p>上記だけ見ると、IRのようなデータ保存・更新サービスではNoSQLは不向きなのでは？と思われると思います。<br> <strong>その通りです。</strong><br>
ユーザー・スコア・譜面 など、リレーショナルなデータ参照があるのでRDBのほうが向いているのですが…。</p> <p><strong>残念ながら、RDBは無料で運用できません。</strong></p> <p>AWSにも<code>Amazon Relational Database Service (RDS)</code>というサービスがありますが、無料で利用することはできません。<br>
Amazon以外のサービスも同様です。</p> <p><code>DynamoDB</code>は料金体系が複雑ですが、IRのような単純なWebサービス構築ならば無料で運用できるはずです。</p> <ul><li>25 GB の保管は無料</li> <li>読み込み/書き込み容量が少なければ無料</li></ul> <p>(<a href="https://aws.amazon.com/jp/dynamodb/pricing/" target="_blank" rel="noopener noreferrer">Amazon DynamoDB 料金<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>)</p> <p>MinIRでは前述した<code>lambda</code>と連携して、データの書き込み、読み込みを行います。</p> <h3 id="amazon-cognito"><a href="#amazon-cognito" aria-hidden="true" class="header-anchor">#</a> Amazon Cognito</h3> <p><img src="/assets/img/cognito.d668537d.png" alt=""></p> <p>(「コグニト」って読みます)<br>
ユーザー認証や情報を取り扱うサービスです。</p> <ul><li>パスワードや個人情報の管理</li> <li>(自前でやろうとすると大変な)2段階認証</li> <li>自前の認証サービス</li></ul> <p>と、ユーザー管理・運用に最低限必要なのが揃ってます。<strong>めっちゃ楽です。</strong><br>
（やろうと思えばtwitterでのログインも実装できますが、MinIRでは採用してません。）</p> <p>同じく、<code>lambda</code>と連携して、ログイン処理、ユーザーデータの追加・取得を行います。</p> <p>ひと月あたり5万ユーザーまでは<strong>無料</strong>です。<br>
(<a href="https://aws.amazon.com/jp/cognito/pricing/" target="_blank" rel="noopener noreferrer">AWS Cognito 料金<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>)</p> <hr> <h2 id="サービスを組み合わせる"><a href="#サービスを組み合わせる" aria-hidden="true" class="header-anchor">#</a> サービスを組み合わせる</h2> <p>上記で紹介したAWSサービスを組み合わせるとこんな感じになります</p> <ul><li>ログイン処理
<ol><li>lambdaにログイン情報送信</li> <li>lambdaからCognitoに情報問い合せ</li> <li>Cognitoからlambdaに結果返却</li> <li>lambdaから結果返却</li></ol></li> <li>スコア送信処理
<ol><li>lambdaにスコア情報送信</li> <li>lambdaからDynamoDBに書き込み</li> <li>（必要なら）lambdaから処理結果を返却</li></ol></li></ul> <p>なんとかうまくいきそうです。<br>
残りは保存されたスコアを表示するIRページの作成です。</p> <hr> <h2 id="webページも無料で作る-github-pages"><a href="#webページも無料で作る-github-pages" aria-hidden="true" class="header-anchor">#</a> Webページも無料で作る -Github Pages-</h2> <p><a href="https://pages.github.com/" target="_blank" rel="noopener noreferrer">GitHub Pages<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> とは、<a href="https://github.com/" target="_blank" rel="noopener noreferrer">GitHub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>による、静的サイトのホスティングサービスです。<br> <code>GitHub</code>のアカウントがあればすぐに公開できるので、非常に手軽です。</p> <ul><li>静的サイト (HTML や CSS, 画像など) を公開できます</li> <li>JavaScriptが動作します</li> <li>独自ドメインOK</li> <li><strong>無料</strong></li></ul> <p>htmlをうまーく配置すれば、それだけでサイトが公開できます。<br>
データの取得（lambdaの呼び出し）には<code>javascript</code>を用います。</p> <p>サイトのソースコードは<a href="https://github.com/SackMagiclight/minir" target="_blank" rel="noopener noreferrer">こちら<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>です。<br>
静的サイトなので、基本全公開です。</p> <p>MinIRのデザインには<a href="https://getmdl.io/" target="_blank" rel="noopener noreferrer">Material Design Lite<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>、テンプレートエンジンには<a href="https://reactjs.org/" target="_blank" rel="noopener noreferrer">React<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>を利用しています。<br>
（詳細情報は各公式ページへ。）</p> <p>というわけで、スコアビューワーもできました。
<img src="/assets/img/minir_score.b403e71a.png" alt=""></p> <hr> <h2 id="まとめ（システム全体像）"><a href="#まとめ（システム全体像）" aria-hidden="true" class="header-anchor">#</a> まとめ（システム全体像）</h2> <p><img src="/assets/img/minir_system.9727a061.png" alt=""></p> <p>こんな感じになりました。<br>
基本的にはlambdaを経由して、データの流れを作ります。</p> <hr> <h2 id="おわりに"><a href="#おわりに" aria-hidden="true" class="header-anchor">#</a> おわりに</h2> <p>というわけで、このような流れがあってMinIRは作られました。<br>
無料でクラウドサービスを利用でき、サービス開発ができるなんていい時代だぁ…<br>
AWS便利だからみんな使おうね！<br>
IRを新しく作るのもいいぞ。</p></div> <div class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">2019-1-6 14:45:50</span></div></div> <div class="wrapper"><ul class="share"><li class="twitter"><a href="https://twitter.com/intent/tweet?url=https://www.gaftalk.com/2018/06/16/development-of-minir/&amp;text=MinIRはどのように作られたか" target="_blank"><i class="fab fa-twitter"></i></a></li> <li class="facebook"><a href="https://www.facebook.com/share.php?u=https://www.gaftalk.com/2018/06/16/development-of-minir/&amp;t=MinIRはどのように作られたか" target="_blank"><i class="fab fa-facebook-f"></i></a></li></ul></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/2017/11/06/core-vega/" class="prev">
          Intel、Coreプロセッサ + Radeon GPU の開発を発表
        </a></span> <span class="next"><a href="/2017/10/20/gtx1070ti-reeked/">
          GTX 1070 Ti はいくらならば「買い」なのか？
        </a>
        →
      </span></p></div></div></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.b856ed55.js" defer></script><script src="/assets/js/32.396c40ca.js" defer></script><script src="/assets/js/1.0b104487.js" defer></script><script src="/assets/js/8.75c86fb6.js" defer></script><script src="/assets/js/14.8f21af76.js" defer></script>
  </body>
</html>
