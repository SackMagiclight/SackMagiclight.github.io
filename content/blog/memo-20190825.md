---
title:  "雑記 -MinIR障害とか-"
createdAt:   2019-08-25 15:00:00 +0900
categories: 
  - 雑記
alias: '/2019/08/25/memo-20190825/'
og:title: '雑記 -MinIR障害とか-'
---

## MinIR障害
AWSアカウントが止められるという異常事態。  
何とか（仮）復旧したものの、まだアカウントは完全復帰していなかったりする。

原因はAWS IAMアクセスキーのGithub上での公開。  
ブラウザ側からAWSリソースへのアクセスにIAMアクセスキーを用いていたが、ベタ書きしていた。  
本来ならAPI Gatewayを利用して`API Gateway Pattern`あたりにするべきなのだが、API Gatewayが無料利用枠対象ではないのでIAMアクセスキーを使わざるを得なかった。  
（Google Cloud FunctionsからRESTを経由してAWS側にアクセスすればアクセスキーは非公開にできたが…）

[GitHub に AWS キーペアを上げると抜かれるってほんと？？？試してみよー！](https://qiita.com/saitotak/items/813ac6c2057ac64d5fef) の通り、セキュリティリスクは高い。  
以前までは **Your AWS account XXX is compromised** のメールが送られて来るだけであったが、**現在では、アクセスキーを公開した場合、（Botアクセスされ）下記のようなメールが届き、アカウント停止対象となる。**


> AWS をご利用のお客様へ  

> お客様のアカウントにおける定期的な調査で、不正な第三者がお客様の個人アカウントや財務に関する情報をどこかで取得して、アマゾン ウェブ サービス (AWS) アカウントにアクセスするために利用した疑いが生じました。このご利用が正しい場合には、次の 3 ステップに従って当社までお知らせください。このご利用が不正なものである場合、お客様のアカウントのセキュリティを確保できるよう、5 日間アカウントへのアクセスが継続されます。

> 以下のセキュリティ手順を 5 日以内に実行されなかった場合は、すべての EC2 スポットインスタンスおよびお客様のアカウントで不正が疑われる利用がすべて停止される可能性があります。このお知らせが誤って送信されたと思われる場合には、すぐにサポートケースからお問い合わせください。


記述されている通り、停止までの猶予は5日あるが、**サポートへ連絡が必須である。**  
連絡というか本件に対してサポートチケットが切られているため、チケットに対し返信をし、レスポンスを受けないといけない。  
（"対応しません" -> チケットClose では **駄目。**  今回これをやらかした）

> お客様のご事情を担当部署に申し伝えさせていただきましたが、いかなる場合であっても
アクセスキーが公開されている状態が継続されますとアカウントはロックされます。
（現在は一時的にアカウントが再開されている状況でございます。）

> そのため、ご不便をおかけいたしますが、アクセスキーを削除いただき、
github へアクセスキーを公開しないように運用くださいますよう、お願い申し上げます。
※アカウントが再度ロックされますと、お客様にてアクセスキーの削除ができませんので、再度アカウントの再開が必要となります。


結論としては上記の通りなので、アクセスキーをどうたらこうたらした。  
結果、リリースしたばかりなのにMinIR API(jar)の更新が発生。利用者には不便を強いることとなった。申し訳ない。


## 枯渇が続くRyzen9 3900X

全然ないねぇ…  
3950X買ったら3900X放出するから欲しい人はどうぞ。

## Radeon VII EOL

（ほぼ利益がないらしい）Radeon VII がEOLに。  
GPGPU用途として破格らしい（？）ので、欲しい人は急ごう。

## ぬきたし2 全ルート了

**おわらないで**

たまにドラマCDとか出して。  
スススススッススして。
